<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-57LM90DX2M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-57LM90DX2M');
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Elite Design â€“ Kitchen Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@500;700&display=swap"
        rel="stylesheet" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { gold: '#C9A96E', dark: '#1A1A1A', mid: '#2C2C2C', light: '#F7F7F5', muted: '#9A9A9A' },
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                },
            },
        };
    </script>
    <style>
        /* â”€â”€ Animations â”€â”€ */
        .step-enter {
            animation: fadeSlideIn .4s cubic-bezier(.25, .46, .45, .94) forwards;
        }

        .step-exit {
            animation: fadeSlideOut .25s cubic-bezier(.55, .06, .68, .19) forwards;
        }

        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(18px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeSlideOut {
            from {
                opacity: 1;
                transform: translateY(0);
            }

            to {
                opacity: 0;
                transform: translateY(-12px);
            }
        }

        /* â”€â”€ Gift reveal animations â”€â”€ */
        @keyframes giftPop {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(30px);
            }

            60% {
                transform: scale(1.05) translateY(-5px);
            }

            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        .gift-enter {
            animation: giftPop .6s cubic-bezier(.25, .46, .45, .94) forwards;
        }

        .gift-shimmer {
            background: linear-gradient(90deg, #C9A96E 0%, #E8D5A8 40%, #C9A96E 60%, #E8D5A8 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
        }

        /* â”€â”€ Option card hover â”€â”€ */
        .option-card {
            transition: all .3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .option-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, .1);
            border-color: #C9A96E !important;
        }

        .option-card.selected {
            border-color: #C9A96E !important;
            background-color: #FDFBF7;
            box-shadow: 0 0 0 2px #C9A96E, 0 10px 20px rgba(201, 169, 110, .1);
        }

        .option-card.has-image {
            padding: 0;
            overflow: hidden;
            border: 0;
            position: relative;
        }

        .option-card.has-image .card-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0));
            padding: 20px;
            padding-top: 40px;
            color: white;
            z-index: 10;
        }

        .option-card.has-image img {
            transition: transform 0.5s ease;
        }

        .option-card.has-image:hover img {
            transform: scale(1.05);
        }

        .option-card.has-image.selected .card-overlay {
            opacity: 1;
        }

        .card-overlay {
            position: absolute;
            inset: 0;
            border: 3px solid #C9A96E;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 20;
            pointer-events: none;
            border-radius: 1rem;
        }

        /* â”€â”€ Progress bar â”€â”€ */
        .progress-fill {
            transition: width .5s cubic-bezier(.4, 0, .2, 1);
        }

        /* â”€â”€ Smooth body â”€â”€ */
        html,
        body {
            scroll-behavior: smooth;
        }

        /* Input focus effect */
        .quiz-input:focus {
            border-color: #C9A96E;
            box-shadow: 0 0 0 3px rgba(201, 169, 110, .15);
        }
    </style>
</head>

<body class="bg-brand-light font-sans text-brand-dark antialiased">

    <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— -->
    <!-- â•‘         QUIZ MODAL OVERLAY            â•‘ -->
    <!-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="quizOverlay"
        class="fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-md p-4 hidden">

        <!-- Quiz Container -->
        <div id="quizContainer"
            class="relative bg-white rounded-3xl shadow-2xl w-full max-w-3xl max-h-[92vh] overflow-y-auto">

            <!-- Close Button -->
            <button onclick="closeQuiz()"
                class="absolute top-4 right-4 z-10 p-2 rounded-full bg-white/10 hover:bg-gray-100 transition-colors backdrop-blur-sm"
                aria-label="Close quiz">
                <svg class="w-6 h-6 text-brand-dark" fill="none" stroke="currentColor" stroke-width="2"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>

            <!-- Language Switcher -->
            <div
                class="absolute top-4 left-4 z-10 flex gap-1 bg-white/80 backdrop-blur-sm p-1 rounded-full border border-gray-100 shadow-sm">
                <button onclick="setLang('he')" id="langHe"
                    class="lang-btn px-3 py-1 text-xs rounded-full border border-transparent transition-all font-medium">×¢×‘</button>
                <button onclick="setLang('ru')" id="langRu"
                    class="lang-btn px-3 py-1 text-xs rounded-full border border-transparent transition-all font-medium">Ğ Ñƒ</button>
                <button onclick="setLang('en')" id="langEn"
                    class="lang-btn px-3 py-1 text-xs rounded-full border border-transparent transition-all font-medium">En</button>
            </div>

            <!-- Inner Padding Wrapper -->
            <div class="px-6 pt-20 pb-10 sm:px-12">

                <!-- Marketing Headline -->
                <div id="quizHeadline" class="text-center mb-6">
                    <p class="text-base sm:text-lg font-bold text-brand-gold leading-snug tracking-tight">
                        <span class="inline-block">ğŸ</span>
                        <span id="headlineText"></span>
                    </p>
                </div>

                <!-- Progress Bar -->
                <div class="mb-10 max-w-xl mx-auto">
                    <div class="flex justify-between items-center mb-2">
                        <span id="progressLabel"
                            class="text-xs font-medium text-brand-muted tracking-wider uppercase"></span>
                        <span id="progressPercent" class="text-xs font-bold text-brand-gold"></span>
                    </div>
                    <div class="w-full h-2 bg-gray-100 rounded-full overflow-hidden">
                        <div id="progressBar"
                            class="progress-fill h-full bg-gradient-to-r from-brand-gold to-amber-300 rounded-full"
                            style="width:0%"></div>
                    </div>
                </div>

                <!-- Steps Container -->
                <div id="stepsWrapper" class="min-h-[300px]"></div>

                <!-- Navigation Buttons -->
                <div id="navButtons"
                    class="flex justify-between items-center mt-12 gap-4 pt-6 border-t border-gray-100">
                    <button id="btnBack" onclick="prevStep()"
                        class="px-6 py-3 rounded-xl text-sm font-medium text-brand-muted hover:text-brand-dark transition-all flex items-center gap-2 group">
                        <span class="group-hover:-translate-x-1 transition-transform">â†</span> <span
                            id="btnBackText"></span>
                    </button>
                    <button id="btnNext" onclick="nextStep()"
                        class="px-10 py-4 rounded-xl text-base font-bold text-white bg-brand-dark hover:bg-brand-gold transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-40 disabled:pointer-events-none disabled:transform-none disabled:shadow-none min-w-[140px]"
                        disabled>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Instant overlay show when start=true (runs before paint) -->
    <script>
        (function () {
            var params = new URLSearchParams(window.location.search);
            if (params.get('start') === 'true') {
                document.getElementById('quizOverlay').classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                // Hide landing section as soon as it exists
                var obs = new MutationObserver(function () {
                    var landing = document.getElementById('quizLandingSection');
                    if (landing) { landing.style.display = 'none'; obs.disconnect(); }
                });
                obs.observe(document.body, { childList: true, subtree: true });
            }
        })();
    </script>

    <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— -->
    <!-- â•‘           OPEN QUIZ BUTTON            â•‘ -->
    <!-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="quizLandingSection"
        class="flex items-center justify-center min-h-screen bg-[url('assets/quiz/modern.jpg')] bg-cover bg-center relative">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-[2px]"></div>
        <button onclick="openQuiz()"
            class="group relative px-12 py-6 rounded-2xl font-serif text-2xl font-bold text-white bg-brand-dark hover:bg-brand-gold transition-all duration-300 shadow-2xl hover:shadow-orange-500/20 border border-white/10 overflow-hidden">
            <span
                class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"></span>
            <span class="relative z-10 flex items-center gap-3">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" />
                </svg>
                Start Kitchen Quiz
            </span>
        </button>
    </div>

    <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— -->
    <!-- â•‘              SCRIPT                   â•‘ -->
    <!-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script>
        /* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
           TRANSLATIONS
        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
        const T = {
            progressLabel: { he: '×©×œ×‘', ru: 'Ğ¨ĞĞ“', en: 'STEP' },
            of: { he: '××ª×•×š', ru: 'Ğ˜Ğ—', en: 'OF' },
            next: { he: '×”××©×š', ru: 'Ğ”Ğ°Ğ»ĞµĞµ', en: 'Next Step' },
            back: { he: '×—×–×•×¨', ru: 'ĞĞ°Ğ·Ğ°Ğ´', en: 'Back' },
            submit: { he: '×§×‘×œ×ª ×”×¦×¢×ª ××—×™×¨', ru: 'ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚', en: 'Get Quote' },
            formTitle: { he: '×”×¢×™×¦×•×‘ ×©×œ×›× ××•×›×Ÿ!', ru: 'Ğ’Ğ°Ñˆ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ğ³Ğ¾Ñ‚Ğ¾Ğ²!', en: 'Your Design is Ready!' },
            formSubtitle: {
                he: '××œ××• ××ª ×”×¤×¨×˜×™× ×œ×§×‘×œ×ª ×”×¦×¢×ª ××—×™×¨ ××™×©×™×ª ×•×™×™×¢×•×¥ ××§×¦×•×¢×™ ×‘×—×™× ×', ru: 'Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° Ğ¸ Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ğ¸', en: "Fill in the details to get a personal quote and free consultation"
            },
            namePlaceholder: { he: '×©× ××œ×', ru: 'ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ğ¸Ğ¼Ñ', en: 'Full name' },
            phonePlaceholder: { he: '××¡×¤×¨ ×˜×œ×¤×•×Ÿ', ru: 'ĞĞ¾Ğ¼ĞµÑ€ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°', en: 'Phone number' },
            required: { he: '× × ×œ××œ× ×©×“×” ×–×”', ru: 'Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ ÑÑ‚Ğ¾ Ğ¿Ğ¾Ğ»Ğµ', en: 'Required field' },
            headline: {
                he: '×¢× ×• ×¢×œ 7 ×©××œ×•×ª ×•×§×‘×œ×• ××ª× ×” ××•×‘×˜×—×ª ×‘×”×–×× ×ª ××˜×‘×—!',
                ru: 'ĞÑ‚Ğ²ĞµÑ‚ÑŒÑ‚Ğµ Ğ½Ğ° 7 Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¾Ğº Ğ¿Ñ€Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğµ ĞºÑƒÑ…Ğ½Ğ¸!',
                en: 'Answer 7 questions and get a guaranteed gift when ordering a kitchen!'
            },
            giftTitle: {
                he: '××–×œ ×˜×•×‘! ×‘×—×¨×ª× ××ª ××ª× ×ª ×”×”×¦×˜×¨×¤×•×ª ×©×œ×›×: ×›×™×•×¨ ×™×•×§×¨×ª×™',
                ru: 'ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼! Ğ’Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¾Ğº: Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¼Ğ¾Ğ¹ĞºĞ°',
                en: "Congratulations! You've unlocked your gift: A premium kitchen sink"
            },
            giftSubtext: {
                he: '×”××¢×¦×‘ ×©×œ× ×• ×™×™×¦×•×¨ ××ª×›× ×§×©×¨ ×‘×”×§×“× ×›×“×™ ×œ×“×•×Ÿ ×‘×¤×¨×•×™×§×˜ ×•×œ×”×‘×˜×™×— ××ª ×”××ª× ×” ×©×œ×›×.',
                ru: 'ĞĞ°Ñˆ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ĞµÑ€ ÑĞ²ÑĞ¶ĞµÑ‚ÑÑ Ñ Ğ²Ğ°Ğ¼Ğ¸ Ğ² Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ğ±ÑÑƒĞ´Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¸ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¾Ğº.',
                en: 'Our designer will contact you shortly to discuss your project and secure your gift.'
            },
            giftClose: { he: '×¡×’×•×¨', ru: 'Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ', en: 'Close' },

            steps: [
                /* â”€â”€ STEP 1: Layout â”€â”€ */
                {
                    title: { he: '××™×š × ×¨××” ×”××˜×‘×— ×©×œ×›×?', ru: 'ĞšĞ°ĞºĞ°Ñ Ñƒ Ğ²Ğ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ° ĞºÑƒÑ…Ğ½Ğ¸?', en: 'What is your kitchen layout?' },
                    subtitle: { he: '×‘×—×¨×• ××ª ×”×¦×•×¨×” ×”×§×¨×•×‘×” ×‘×™×•×ª×¨ ×œ××¦×‘ ×”×§×™×™×', ru: 'Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ„Ğ¾Ñ€Ğ¼Ñƒ, Ğ½Ğ°Ğ¸Ğ±Ğ¾Ğ»ĞµĞµ Ğ±Ğ»Ğ¸Ğ·ĞºÑƒÑ Ğº Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹', en: 'Select the shape closest to current situation' },
                    options: [
                        { id: 'straight', label: { he: '××˜×‘×— ×™×©×¨', ru: 'ĞŸÑ€ÑĞ¼Ğ°Ñ', en: 'Straight' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="4" y="10" width="16" height="4" rx="1"/></svg>' },
                        { id: 'l-shape', label: { he: '××˜×‘×— ×¨', ru: 'Ğ“-Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ½Ğ°Ñ', en: 'Lâ€‘Shape' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 4v16h16v-4H8V4H4z"/></svg>' },
                        { id: 'u-shape', label: { he: '××˜×‘×— ×—', ru: 'ĞŸ-Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ½Ğ°Ñ', en: 'Uâ€‘Shape' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 4v16h16V4h-4v12H8V4H4z"/></svg>' },
                        { id: 'island', label: { he: '××˜×‘×— ×¢× ××™', ru: 'Ğ¡ Ğ¾ÑÑ‚Ñ€Ğ¾Ğ²Ğ¾Ğ¼', en: 'With Island' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="4" y="4" width="4" height="16" rx="1"/><rect x="12" y="8" width="8" height="8" rx="1"/></svg>' },
                        { id: 'parallel', label: { he: '××˜×‘×— ××§×‘×™×œ', ru: 'ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ°Ñ', en: 'Parallel' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="4" y="4" width="4" height="16" rx="1"/><rect x="16" y="4" width="4" height="16" rx="1"/></svg>' },
                    ],
                },
                /* â”€â”€ STEP 2: Kitchen Length â”€â”€ */
                {
                    title: { he: '××”×• ×”××•×¨×š ×”×›×•×œ×œ (×‘××˜×¨ ×¨×¥)?', ru: 'ĞĞ±Ñ‰Ğ°Ñ Ğ´Ğ»Ğ¸Ğ½Ğ° (Ğ¿Ğ¾Ğ³Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ñ‹)?', en: 'Total length (linear meters)?' },
                    subtitle: { he: '×”×¢×¨×›×” ×’×¡×” ××¡×¤×™×§×” ×‘×©×œ×‘ ×–×”', ru: 'Ğ“Ñ€ÑƒĞ±Ğ¾Ğ¹ Ğ¾Ñ†ĞµĞ½ĞºĞ¸ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ½Ğ° Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¼ ÑÑ‚Ğ°Ğ¿Ğµ', en: 'Rough estimate is enough for now' },
                    options: [
                        { id: 'up-to-3m', label: { he: '×¢×“ 3 ××˜×¨', ru: 'Ğ”Ğ¾ 3 Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²', en: 'Up to 3m' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="9" width="8" height="6" rx="1"/><path d="M4 9v6M6 9v3M8 9v6"/><path d="M10 12h10" stroke-dasharray="2 2"/></svg>' },
                        { id: '3-5m', label: { he: '3 - 5 ××˜×¨', ru: '3 - 5 Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²', en: '3 - 5m' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="9" width="12" height="6" rx="1"/><path d="M4 9v6M7 9v3M10 9v6M13 9v3"/><path d="M14 12h7" stroke-dasharray="2 2"/></svg>' },
                        { id: '5-10m', label: { he: '5 - 10 ××˜×¨', ru: '5 - 10 Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²', en: '5 - 10m' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="9" width="16" height="6" rx="1"/><path d="M4 9v6M7 9v3M10 9v6M13 9v3M16 9v6"/><path d="M18 12h3" stroke-dasharray="2 2"/></svg>' },
                        { id: 'over-10m', label: { he: '××¢×œ 10 ××˜×¨', ru: 'Ğ‘Ğ¾Ğ»ĞµĞµ 10 Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²', en: 'Over 10m' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="9" width="20" height="6" rx="1"/><path d="M4 9v6M7 9v3M10 9v6M13 9v3M16 9v6M19 9v3"/></svg>' },
                        { id: 'dont-know', label: { he: '×œ× ×™×•×“×¢ / ×¦×¨×™×š ××“×™×“×”', ru: 'ĞĞµ Ğ·Ğ½Ğ°Ñ / Ğ½ÑƒĞ¶ĞµĞ½ Ğ·Ğ°Ğ¼ĞµÑ€', en: "Need measurement" }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>' },
                    ],
                },
                /* â”€â”€ STEP 3: Kashrut â”€â”€ */
                {
                    title: { he: '×”×× ×”××˜×‘×— ×¦×¨×™×š ×œ×”×™×•×ª ×›×©×¨?', ru: 'ĞÑƒĞ¶Ğ½Ğ° Ğ»Ğ¸ ĞºĞ¾ÑˆĞµÑ€Ğ½Ğ°Ñ ĞºÑƒÑ…Ğ½Ñ?', en: 'Do you need a Kosher kitchen?' },
                    subtitle: { he: '×”×¤×¨×“×” ×‘×™×Ÿ ×›×™×•×¨×™×, ××©×˜×—×™× ×•×ª× ×•×¨×™×', ru: 'Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ€Ğ°ĞºĞ¾Ğ²Ğ¸Ğ½, Ğ¿Ğ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚ĞµĞ¹ Ğ¸ Ğ´ÑƒÑ…Ğ¾Ğ²Ğ¾Ğº', en: 'Separation of sinks, surfaces, and ovens' },
                    options: [
                        { id: 'kosher-yes', label: { he: '×›×Ÿ, ×—×©×•×‘ ×œ×™ ×××•×“', ru: 'Ğ”Ğ°, Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ²Ğ°Ğ¶Ğ½Ğ¾', en: 'Yes, very important' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 3v18M3 12h18M12 8l4 4-4 4M8 12l4-4-4-4"/></svg>' }, // Star layoutish
                        { id: 'kosher-no', label: { he: '×œ× / ×¡×˜× ×“×¨×˜×™', ru: 'ĞĞµÑ‚ / Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚', en: 'No / Standard' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/></svg>' },
                    ],
                },
                /* â”€â”€ STEP 4: Style (Images) â”€â”€ */
                {
                    title: { he: '××™×–×” ×¡×’× ×•×Ÿ ××ª× ××•×”×‘×™×?', ru: 'ĞšĞ°ĞºĞ¾Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ Ğ²Ğ°Ğ¼ Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ?', en: 'Which style do you like?' },
                    subtitle: { he: '×‘×—×¨×• ××ª ×”×¡×’× ×•×Ÿ ×©×”×›×™ ××“×‘×¨ ××œ×™×›×', ru: 'Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ‚Ğ¸Ğ»ÑŒ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ²Ğ°Ğ¼ Ğ±Ğ»Ğ¸Ğ¶Ğµ Ğ²ÑĞµĞ³Ğ¾', en: 'Choose the style that speaks to you' },
                    options: [
                        { id: 'modern', label: { he: '××•×“×¨× ×™ / ××™× ×™××œ×™×¡×˜×™', ru: 'ĞœĞ¾Ğ´ĞµÑ€Ğ½ / ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¼', en: 'Modern / Minimalist' }, image: 'assets/quiz/modern.jpg' },
                        { id: 'classic', label: { he: '×›×¤×¨×™ / ×¤×¨×•×‘× ×¡', ru: 'ĞšĞ»Ğ°ÑÑĞ¸ĞºĞ° / ĞŸÑ€Ğ¾Ğ²Ğ°Ğ½Ñ', en: 'Classic / Provence' }, image: 'assets/quiz/classic.jpg' },
                        { id: 'industrial', label: { he: '×ª×¢×©×™×™×ª×™ / ×œ×•×¤×˜', ru: 'Ğ˜Ğ½Ğ´ÑƒÑÑ‚Ñ€Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ / Ğ›Ğ¾Ñ„Ñ‚', en: 'Industrial / Loft' }, image: 'assets/quiz/industrial.jpg' },
                        { id: 'urban', label: { he: '××•×¨×‘× ×™ / ×™×•×§×¨×ª×™', ru: 'Ğ£Ñ€Ğ±Ğ°Ğ½ / Ğ­Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ğ¹', en: 'Urban / Luxury' }, image: 'assets/quiz/urban.jpg' },
                    ],
                },
                /* â”€â”€ STEP 5: Countertop (Images) â”€â”€ */
                {
                    title: { he: '××™×–×” ××©×˜×— ×¢×‘×•×“×” ×ª×¨×¦×•?', ru: 'ĞšĞ°ĞºÑƒÑ ÑÑ‚Ğ¾Ğ»ĞµÑˆĞ½Ğ¸Ñ†Ñƒ Ğ²Ñ‹ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ?', en: 'Which countertop do you prefer?' },
                    subtitle: { he: '×”××©×˜×— × ×•×ª×Ÿ ××ª ×”×˜×•×Ÿ ×”×¡×•×¤×™ ×œ××˜×‘×—', ru: 'Ğ¡Ñ‚Ğ¾Ğ»ĞµÑˆĞ½Ğ¸Ñ†Ğ° Ğ·Ğ°Ğ´Ğ°ĞµÑ‚ Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ‚Ğ¾Ğ½ ĞºÑƒÑ…Ğ½Ğµ', en: 'The countertop sets the final tone' },
                    options: [
                        { id: 'caesarstone', label: { he: '×§×™×¡×¨×¡×˜×•×Ÿ / ×¡×™×œ×™×§×”', ru: 'Caesarstone', en: 'Caesarstone' }, image: 'assets/quiz/surface-1.jpg' },
                        { id: 'dekton', label: { he: '×“×§×˜×•×Ÿ / ×’×¨× ×™×˜ ×¤×•×¨×¦×œ×Ÿ', ru: 'Dekton / Porcelain', en: 'Dekton / Porcelain' }, image: 'assets/quiz/surface-2.jpg' },
                        { id: 'natural-stone', label: { he: '×‘×•×¦×³×¨ / ×¢×¥ ×˜×‘×¢×™', ru: 'Ğ”ĞµÑ€ĞµĞ²Ğ¾ / Ğ‘ÑƒÑ‡ĞµÑ€', en: 'Butcher / Wood' }, image: 'assets/quiz/surface-3.jpg' },
                        { id: 'formica', label: { he: '×¤×•×¨××™×™×§×” / HPL', ru: 'Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ğ¹ĞºĞ° / HPL', en: 'Formica / HPL' }, image: 'assets/quiz/surface-4.jpg' },
                    ],
                },
                /* â”€â”€ STEP 6: Timing â”€â”€ */
                {
                    title: { he: '××ª×™ ×ª×¨×¦×• ×œ×”×ª×—×™×œ?', ru: 'ĞšĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚Ğµ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ?', en: 'When do you want to start?' },
                    subtitle: { he: '×›×“×™ ×©× ×•×›×œ ×œ×”×ª×›×•× ×Ÿ ×‘×”×ª××', ru: 'Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ğ¼Ñ‹ Ğ¼Ğ¾Ğ³Ğ»Ğ¸ Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ÑŒÑÑ', en: 'So we can prepare accordingly' },
                    options: [
                        { id: 'new-apt', label: { he: '×›× ×™×¡×” ×œ×“×™×¨×” ×—×“×©×”', ru: 'ĞĞ¾Ğ²Ğ°Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ°', en: 'New Apartment' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>' },
                        { id: 'renovating', label: { he: '×× ×—× ×• ×‘×©×™×¤×•×¥', ru: 'Ğ”ĞµĞ»Ğ°ĞµĞ¼ Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚', en: 'Renovating' }, icon: '<svg class="w-8 h-8 opacity-90" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>' },
                        { id: 'checking', label: { he: '×¨×§ ×‘×•×“×§×™× ××—×™×¨×™×', ru: 'Ğ£Ğ·Ğ½Ğ°ĞµĞ¼ Ñ†ĞµĞ½Ñ‹', en: 'Just checking prices' }, icon: '<svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/><path d="M12 18V6"/></svg>' },
                    ],
                },
                /* â”€â”€ STEP 7: Lead form â”€â”€ */
                { isForm: true },
            ],
        };

        /* â”â”â” STATE â”â”â” */
        let currentLang = 'he';
        let currentStep = 0;
        const totalSteps = T.steps.length;
        const answers = {};

        /* â”â”â” HELPERS â”â”â” */
        const $ = (sel) => document.querySelector(sel);
        const $$ = (sel) => document.querySelectorAll(sel);
        const txt = (obj) => obj[currentLang] || obj.en;

        /* â”â”â” LANGUAGE â”â”â” */
        function setLang(lang) {
            currentLang = lang;
            const isRTL = lang === 'he';
            document.documentElement.lang = lang;
            document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
            $('#quizContainer').dir = isRTL ? 'rtl' : 'ltr';

            // Update marketing headline
            const headlineEl = $('#headlineText');
            if (headlineEl) headlineEl.textContent = txt(T.headline);

            // Highlight active lang button
            $$('.lang-btn').forEach(b => {
                b.classList.remove('bg-brand-dark', 'text-white', 'border-brand-dark');
                b.classList.add('border-transparent', 'text-brand-muted', 'hover:bg-gray-100');
            });
            const active = $(`#lang${lang.charAt(0).toUpperCase() + lang.slice(1)}`);
            active.classList.add('bg-brand-dark', 'text-white', 'border-brand-dark');
            active.classList.remove('border-transparent', 'text-brand-muted', 'hover:bg-gray-100');

            renderStep();
        }

        /* â”â”â” PROGRESS â”â”â” */
        function updateProgress() {
            const pct = Math.round(((currentStep) / (totalSteps - 1)) * 100);
            $('#progressBar').style.width = pct + '%';
            $('#progressLabel').textContent = `${txt(T.progressLabel)} ${currentStep + 1} ${txt(T.of)} ${totalSteps}`;
            $('#progressPercent').textContent = Math.min(pct, 100) + '%';
        }

        /* â”â”â” RENDER STEP â”â”â” */
        function renderStep() {
            const wrapper = $('#stepsWrapper');
            const step = T.steps[currentStep];

            // Navigation labels
            $('#btnBackText').textContent = txt(T.back);
            $('#btnBack').style.display = currentStep === 0 ? 'none' : 'flex';

            updateProgress();

            // â”€â”€ Form step â”€â”€
            if (step.isForm) {
                $('#btnNext').style.display = '';
                $('#btnNext').textContent = txt(T.submit);
                wrapper.innerHTML = `
      <div class="step-enter text-center pt-8">
        <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-brand-gold/10 to-brand-gold/5 border border-brand-gold/20 flex items-center justify-center">
          <svg class="w-10 h-10 text-brand-gold shadow-sm" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"/></svg>
        </div>
        <h2 class="text-3xl sm:text-4xl font-serif font-bold text-brand-dark mb-3">${txt(T.formTitle)}</h2>
        <p class="text-brand-muted text-base mb-10 max-w-md mx-auto leading-relaxed">${txt(T.formSubtitle)}</p>
        <div class="max-w-sm mx-auto space-y-5">
          <div class="relative group">
            <input id="inputName" type="text" placeholder="${txt(T.namePlaceholder)}"
                class="quiz-input w-full px-6 py-4 rounded-xl border-2 border-gray-100 bg-gray-50 text-brand-dark placeholder-brand-muted text-base outline-none transition-all group-hover:bg-white" />
          </div>
          <div class="relative group">
            <input id="inputPhone" type="tel" placeholder="${txt(T.phonePlaceholder)}"
                class="quiz-input w-full px-6 py-4 rounded-xl border-2 border-gray-100 bg-gray-50 text-brand-dark placeholder-brand-muted text-base outline-none transition-all group-hover:bg-white" dir="ltr" />
          </div>
          <p id="formError" class="text-red-500 text-sm hidden flex items-center justify-center gap-1 font-medium bg-red-50 py-2 rounded-lg">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
            ${txt(T.required)}
          </p>
        </div>
      </div>
    `;
                validateForm();
                $('#inputName').addEventListener('input', validateForm);
                $('#inputPhone').addEventListener('input', validateForm);
                return;
            }

            // â”€â”€ Options step â”€â”€
            $('#btnNext').textContent = txt(T.next);

            // Grid logic
            let gridClass = 'grid-cols-2';
            if (step.options.some(o => o.image)) {
                gridClass = 'grid-cols-2'; // Image cards always 2 cols
            } else if (step.options.length > 4) {
                gridClass = 'grid-cols-2 sm:grid-cols-3';
            } else {
                gridClass = 'grid-cols-2';
            }

            wrapper.innerHTML = `
    <div class="step-enter">
      <h2 class="text-3xl sm:text-4xl font-serif font-bold text-brand-dark mb-3 text-center sm:text-start">${txt(step.title)}</h2>
      <p class="text-brand-muted text-base mb-10 text-center sm:text-start max-w-2xl">${txt(step.subtitle)}</p>
      
      <div class="grid ${gridClass} gap-4 sm:gap-6">
        ${step.options.map(opt => {
                const isSelected = answers[currentStep] === opt.id;
                const hasImage = !!opt.image;

                if (hasImage) {
                    return `
                <button onclick="selectOption(${currentStep},'${opt.id}')" data-id="${opt.id}"
                    class="option-card has-image rounded-2xl cursor-pointer text-left h-48 sm:h-56 ${isSelected ? 'selected' : ''}">
                    <img src="${opt.image}" alt="${txt(opt.label)}" class="w-full h-full object-cover">
                    <div class="card-overlay"></div>
                    <div class="card-content">
                        <span class="text-lg font-bold font-serif leading-tight block">${txt(opt.label)}</span>
                    </div>
                </button>`;
                } else {
                    return `
                <button onclick="selectOption(${currentStep},'${opt.id}')" data-id="${opt.id}"
                    class="option-card flex flex-col items-center justify-center gap-4 p-6 rounded-2xl border-2 border-gray-100 bg-white cursor-pointer text-center h-full min-h-[140px] hover:bg-gray-50 ${isSelected ? 'selected' : ''}">
                    <span class="text-brand-dark opacity-80 group-hover:opacity-100 transition-opacity">${opt.icon}</span>
                    <span class="text-base font-medium text-brand-dark">${txt(opt.label)}</span>
                </button>`;
                }
            }).join('')}
      </div>
    </div>
  `;
            // Hide Next button for option steps (auto-advance), show for form
            if (!step.isForm) {
                $('#btnNext').style.display = 'none';
            }
            $('#btnNext').disabled = !answers[currentStep];
        }

        /* â”â”â” SELECT â”â”â” */
        function selectOption(step, id) {
            answers[step] = id;
            $$('.option-card').forEach(c => c.classList.remove('selected'));
            document.querySelector(`[data-id="${id}"]`)?.classList.add('selected');
            // Auto-advance after brief visual feedback
            setTimeout(() => {
                if (currentStep < totalSteps - 1) {
                    animateOut(() => { currentStep++; renderStep(); });
                }
            }, 400);
        }

        /* â”â”â” VALIDATE FORM â”â”â” */
        function validateForm() {
            const name = $('#inputName')?.value.trim();
            const phone = $('#inputPhone')?.value.trim();
            const valid = name && phone && phone.length >= 7;
            $('#btnNext').disabled = !valid;
            if ($('#formError')) $('#formError').classList.toggle('hidden', !!valid || (!name && !phone));
        }

        /* â”â”â” NAVIGATION â”â”â” */
        function nextStep() {
            const step = T.steps[currentStep];
            if (step.isForm) { submitQuiz(); return; }
            if (!answers[currentStep]) return;
            if (currentStep < totalSteps - 1) {
                animateOut(() => { currentStep++; renderStep(); });
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                animateOut(() => { currentStep--; renderStep(); });
            }
        }

        function animateOut(cb) {
            const wrapper = $('#stepsWrapper');
            const inner = wrapper.firstElementChild;
            if (inner) {
                inner.classList.remove('step-enter');
                inner.classList.add('step-exit');
                setTimeout(cb, 250);
            } else { cb(); }
        }

        /* â”â”â” SUBMIT â”â”â” */
        async function submitQuiz() {
            const name = $('#inputName').value.trim();
            const phone = $('#inputPhone').value.trim();
            if (!name || !phone) { $('#formError')?.classList.remove('hidden'); return; }

            const btnNext = $('#btnNext');
            const originalText = btnNext.textContent;
            btnNext.disabled = true;
            btnNext.innerHTML = '<span class="flex items-center justify-center gap-2"><svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Sending...</span>';

            // Build human-readable summary
            const summaryParts = [];
            const stepTitles = [
                { he: '×¦×•×¨×ª ××˜×‘×—', ru: 'Ğ¤Ğ¾Ñ€Ğ¼Ğ° ĞºÑƒÑ…Ğ½Ğ¸', en: 'Kitchen shape' },
                { he: '××•×¨×š ×”××˜×‘×—', ru: 'Ğ”Ğ»Ğ¸Ğ½Ğ° ĞºÑƒÑ…Ğ½Ğ¸', en: 'Kitchen length' },
                { he: '×›×©×¨×•×ª', ru: 'ĞšĞ°ÑˆÑ€ÑƒÑ‚', en: 'Kashrut' },
                { he: '×¡×’× ×•×Ÿ', ru: 'Ğ¡Ñ‚Ğ¸Ğ»ÑŒ', en: 'Style' },
                { he: '××©×˜×—', ru: 'Ğ¡Ñ‚Ğ¾Ğ»ĞµÑˆĞ½Ğ¸Ñ†Ğ°', en: 'Countertop' },
                { he: '×©×œ×‘ ×¤×¨×•×™×§×˜', ru: 'Ğ­Ñ‚Ğ°Ğ¿ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°', en: 'Project stage' },
            ];

            for (let i = 0; i < 6; i++) {
                const stepData = T.steps[i];
                const chosen = stepData.options.find(o => o.id === answers[i]);
                if (chosen) {
                    summaryParts.push(`â€¢ *${txt(stepTitles[i])}:* ${txt(chosen.label)}`);
                }
            }

            const giftLine = currentLang === 'he' ? 'ğŸ *××ª× ×”: ×›×™×•×¨ ×™×•×§×¨×ª×™ (××•×‘×˜×—×ª)*' :
                currentLang === 'ru' ? 'ğŸ *ĞŸĞ¾Ğ´Ğ°Ñ€Ğ¾Ğº: ĞŸÑ€ĞµĞ¼Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¼Ğ¾Ğ¹ĞºĞ° (Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½)*' :
                    'ğŸ *Gift: Premium Sink (Guaranteed)*';

            const message = [
                `ğŸ  *Elite Design â€“ Kitchen Quiz*`,
                ``,
                `ğŸ‘¤ *Name:* ${name}`,
                `ğŸ“ *Phone:* ${phone}`,
                ``,
                `ğŸ—ï¸ *Project Details:*`,
                ...summaryParts,
                ``,
                giftLine,
            ].join('\n');

            const botToken = '7840966634:AAGb94rcHU7WxW9BWBRIwtbh7b48GvYbSgU';
            const chatId = '1492940504';

            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: message,
                        parse_mode: 'Markdown',
                    }),
                });

                if (response.ok) {
                    showGiftReveal();
                } else {
                    throw new Error('Telegram API error');
                }
            } catch (error) {
                console.error('Error submitting quiz:', error);
                alert(currentLang === 'he' ? '×©×’×™××” ×‘×©×œ×™×—×ª ×”×˜×•×¤×¡. × ×¡×” ×©×•×‘.' :
                    currentLang === 'ru' ? 'ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ. ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ĞµÑ‰Ğµ Ñ€Ğ°Ğ·.' :
                        'Error submitting form. Please try again.');
                btnNext.disabled = false;
                btnNext.textContent = originalText;
            }
        }

        /* â”â”â” GIFT REVEAL SCREEN â”â”â” */
        function showGiftReveal() {
            const wrapper = $('#stepsWrapper');
            const isRTL = currentLang === 'he';

            // Hide progress bar and nav buttons
            $('#navButtons').style.display = 'none';
            const progressSection = wrapper.closest('.px-6')?.querySelector('.mb-10.max-w-xl');
            if (progressSection) progressSection.style.display = 'none';
            // Hide headline
            const headline = $('#quizHeadline');
            if (headline) headline.style.display = 'none';

            wrapper.innerHTML = `
              <div class="gift-enter text-center py-6 sm:py-10">
                <!-- Confetti Icon -->
                <div class="text-5xl sm:text-6xl mb-4">ğŸ‰</div>

                <!-- Gift Image -->
                <div class="relative w-48 h-48 sm:w-56 sm:h-56 mx-auto mb-8 rounded-2xl overflow-hidden shadow-xl border-2 border-brand-gold/30">
                  <img src="assets/quiz/sink-gift.jpg" alt="Kitchen Sink Gift"
                       class="w-full h-full object-cover"
                       onerror="this.style.display='none'; this.parentElement.classList.add('bg-gradient-to-br','from-brand-gold/20','to-brand-gold/5','flex','items-center','justify-center'); this.parentElement.innerHTML='<svg class=\'w-20 h-20 text-brand-gold\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'1.5\' viewBox=\'0 0 24 24\'><path stroke-linecap=\'round\' stroke-linejoin=\'round\' d=\'M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z\'/></svg>';" />
                </div>

                <!-- Title -->
                <h2 class="text-2xl sm:text-3xl font-serif font-bold text-brand-dark mb-4 leading-tight gift-shimmer">
                  ${txt(T.giftTitle)}
                </h2>

                <!-- Subtext -->
                <p class="text-brand-muted text-base sm:text-lg mb-10 max-w-md mx-auto leading-relaxed">
                  ${txt(T.giftSubtext)}
                </p>

                <!-- Close Button -->
                <button onclick="closeQuiz()"
                  class="px-10 py-4 rounded-xl text-base font-bold text-white bg-brand-dark hover:bg-brand-gold transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 min-w-[140px]">
                  ${txt(T.giftClose)}
                </button>
              </div>
            `;
        }

        /* â”â”â” OPEN / CLOSE â”â”â” */
        function openQuiz() {
            currentStep = 0;
            Object.keys(answers).forEach(k => delete answers[k]);
            // Reset UI elements that may have been hidden by gift reveal
            const navBtns = $('#navButtons');
            if (navBtns) navBtns.style.display = '';
            const headline = $('#quizHeadline');
            if (headline) headline.style.display = '';
            const progressSection = $('#stepsWrapper')?.closest('.px-6')?.querySelector('.mb-10.max-w-xl');
            if (progressSection) progressSection.style.display = '';
            setLang(currentLang);
            $('#quizOverlay').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeQuiz() {
            // If opened from the main site via ?start=true, go back
            const params = new URLSearchParams(window.location.search);
            if (params.get('start') === 'true') {
                window.location.href = '/';
                return;
            }
            $('#quizOverlay').classList.add('hidden');
            document.body.style.overflow = '';
        }

        // Close on overlay click
        $('#quizOverlay').addEventListener('click', (e) => {
            if (e.target === $('#quizOverlay')) closeQuiz();
        });

        // Close on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeQuiz();
        });

        // Initialize language and handle URL parameters
        function initQuizFromURL() {
            const params = new URLSearchParams(window.location.search);
            const lang = params.get('lang');
            const start = params.get('start');

            if (lang && ['he', 'ru', 'en'].includes(lang)) {
                setLang(lang);
            } else {
                setLang('he');
            }

            if (start === 'true') {
                // Overlay is already visible from inline script, just init
                openQuiz();
            }
        }

        if (document.readyState === 'loading') {
            window.addEventListener('DOMContentLoaded', initQuizFromURL);
        } else {
            initQuizFromURL();
        }
    </script>

</body>

</html>